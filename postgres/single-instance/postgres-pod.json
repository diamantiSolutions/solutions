{
    "apiVersion": "v1",
    "kind": "List",
    "metadata": {},
    "items": [
        {
            "apiVersion": "v1",
	    "kind": "ReplicationController",
	    "metadata":{
	    	"name": "pg-single"
	    },
	    "spec":{
		"replicas": 1,
  		"selector":{
		    "name": "pg-single"
		},
		"template":{
	            "metadata": {
			"annotations": {
			    "diamanti.com/endpoint0": "{\"network\":\"default\",\"perfTier\":\"high\"}"
			},
			"labels": {
			    "name": "pg-single"
			},
			"name": "pg-single"
		    },
		    "spec": {
			"containers": [
			    {


				"image": "crunchydata/crunchy-postgres:centos7-9.6-1.4.1",
				"env": [{
				    "name": "PG_MASTER_PORT",
				    "value": "5432"
				}, {
				    "name": "PG_MODE",
				    "value": "master"
				}, {
				    "name": "PGDATA_PATH_OVERRIDE",
				    "value": "master-dc"
				}, {
				    "name": "PG_MASTER_USER",
				    "value": "master"
				}, {
				    "name": "PG_MASTER_PASSWORD",
				    "value": "password"
				}, {
				    "name": "PG_USER",
				    "value": "pgbench"
				}, {
				    "name": "PG_PASSWORD",
				    "value": "password"
				}, {
				    "name": "PG_DATABASE",
				    "value": "pgbench"
				}, {
				    "name": "PG_ROOT_PASSWORD",
				    "value": "password"
				}, {
				    "name": "PGHOST",
				    "value": "/tmp"
				}],
				"volumeMounts": [{
				    "mountPath": "/pgdata",
				    "name": "pgdata",
				    "readOnly": false
				}],
				"imagePullPolicy": "Always",
				"name": "postgres",
				"resources" : {
				    "requests" : {
					"cpu": "0m",
					"memory": "4Gi"
				    },
				    "limits" : {
					
					"memory": "4Gi"
				    }
				},
				"ports": [
				    {
					"containerPort": 5432,
					"protocol": "TCP"
				    }
				],
				"volumeMounts": [
				    {
					"mountPath": "/pgdata",
					"name": "pgdata",
					"readOnly": false
				    }
				]
			    }
			    
			],
			"securityContext":{
			    "fsGroup": 26
			},
			"volumes": [
			    {
				"name": "pgdata",
				"flexVolume": {
				    "driver": "diamanti.com/volume",
				    "fsType": "xfs",
				    "options": {
					"name": "pg-vol-single",
					"perfTier": "high",
					"type":"Simple"
				    }
				}
			    }
			]
		    }
		}
	    }
        },
        {
            "apiVersion": "v1",
            "kind": "Service",
            "metadata": {
                "labels": {
                    "name": "pg-single"
                },
                "name": "pg-single"
            },
            "spec": {
                "clusterIP": "None",
                "ports": [
                    {
                        "nodePort": 0,
                        "port": 5432,
                        "protocol": "TCP",
                        "targetPort": 5432
                    }
                ],
                "selector": {
                    "name": "pg-single"
                },
                "sessionAffinity": "None",
                "type": "ClusterIP"
            }
        }
    ]
}
