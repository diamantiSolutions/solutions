apiVersion: v1
kind: ReplicationController
metadata:
  name: nginx-ingress-rc
  labels:
    app: nginx-ingress
spec:
  replicas: 1
  selector:
    app: nginx-ingress
  template:
    metadata:
      labels:
        app: nginx-ingress
      annotations:
        diamanti.com/endpoint0: '{"network":"default","perfTier":"high"}'
    spec:
      dnsPolicy: ClusterFirst
      containers:
      - image: guptaarvindk/nginx-ingress:latest
        imagePullPolicy: Always
        name: nginx-ingress
        env:
        - name: KUBERNETES_SERVICE_HOST
          value: "172.16.17.3"
        - name: KUBERNETES_SERVICE_PORT
          value: "8080"
        - name: KUBERNETES_PORT
          value: "tcp://172.16.17.3:6443"
        - name: KUBERNETES_PORT_443_TCP_ADDR
          value: "172.16.17.3"
        - name: KUBERNETES_PORT_443_TCP_PORT
          value: "6443"
        - name: KUBERNETES_PORT_443_TCP
          value: "tcp://172.16.17.3:6443"
        #ports:
        #- containerPort: 81
        #  hostPort: 8
        #- containerPort: 444
        #  hostPort: 444
        # Uncomment the lines below to enable extensive logging and/or customization of
        # NGINX configuration with configmaps
        args:
         - -v=3
         #- -nginx-configmaps=default/nginx-config
